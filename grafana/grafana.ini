[server]
http_port = 3000
protocol = http
[auth]
# Keep login form as fallback during setup
disable_login_form = false

[auth.generic_oauth]
enabled = true
name = Keycloak
allow_sign_up = true
client_id = [YOUR_CLIENT_ID]
client_secret = [YOUR_CLIENT_SECRET]
scopes = openid email profile
auth_url = http://localhost:8080/realms/test-realm/protocol/openid-connect/auth
token_url = http://keycloak:8080/realms/test-realm/protocol/openid-connect/token
api_url = http://keycloak:8080/realms/test-realm/protocol/openid-connect/userinfo
role_attribute_path = contains(realm_access.roles[*], 'admin') && 'Admin' || contains(realm_access.roles[*], 'editor') && 'Editor' || 'Viewer'
login_attribute_path = preferred_username
name_attribute_path = name
email_attribute_path = email
# Uncomment if using TLS
# tls_skip_verify_insecure = false

# Use the browser redirect directly to Keycloak 
# Change this to the external URL when accessing from outside
oauth_auto_login = false

# Optional - if you want to use Keycloak groups for Grafana roles
# groups_attribute_path = groups
# team_ids_attribute_path = team_ids
# allowed_domains = 
# allow_assign_grafana_admin = false

[users]
auto_assign_org = true
auto_assign_org_id = 1
; auto_assign_org_role = Viewer